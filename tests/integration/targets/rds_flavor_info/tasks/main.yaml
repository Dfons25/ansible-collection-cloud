---
- module_defaults:
    group/otc:
      cloud: otc
  block:
    - name: Get flavor info
      rds_flavor_info:
        cloud: "{{ test_cloud }}"
        datastore: "postgresql"
        version: "10"
        instance_mode: "single"
      register: rds

    - name: assert result
      assert:
        that:
          - rds is success
          - rds is not changed
          - rds.rds_flavors is defined
          - rds.rds_flavors[0]['instance_mode'] is defined
          - rds.rds_flavors[0]['name'] is defined
          - rds.rds_flavors[0]['ram'] is defined
          - rds.rds_flavors[0]['spec_code'] is defined
          - rds.rds_flavors[0]['vcpus'] is defined
